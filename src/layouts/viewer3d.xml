<?xml version="1.0" encoding="UTF-8"?>
<?xml-model href="../../../telera-app/layout.dtd" type="application/xml-dtd"?>

<!-- https://raw.githubusercontent.com/lemleyautomation/telera-layout/main/layout.dtd -->

<page name="Viewer3D">
    <reusable name="clickable icon">
        <element>
            <element-config>
                <direction is="ttb" />
                <width-fit max="40" />
                <align-children-x to="center" />
            </element-config>

            <element>
                <element-config>
                    <padding-all is="50" />
                    <color is="rgb(140,140,140)" />
                    <width-fixed at="40" />
                    <height-fixed at="40" />
                    <hovered>
                        <radius-all is="10" />
                        <border-all is="3" />
                    </hovered>
                    <clicked emit="Clicked">
                        <radius-all is="10" />
                        <border-all is="4" />
                        <border-color is="rgb(0,96,255)" />
                    </clicked>
                    <image src="icon" />
                </element-config>
            </element>

            <text-element>
                <text-config>
                    <font-size is="10" />
                    <color is="white" />
                    <text-align-center />
                </text-config>
                <dyn-content from="label" />
            </text-element>
        </element>
        
    </reusable>

    <reusable name="scaled clickable icon">
        <element>
            <element-config>
                <child-gap is="2" />
                <direction is="ttb" />
                <align-children-y to="center" />
            </element-config>

            <element>
                <element-config>
                    <padding-all is="50" />
                    <color is="rgb(140,140,140)" />
                    <width-fixed at="20" />
                    <height-fixed at="20" />
                    <hovered>
                        <radius-all is="5" />
                        <border-all is="2" />
                    </hovered>
                    <clicked emit="Clicked">
                        <radius-all is="5" />
                        <border-all is="3" />
                        <border-color is="rgb(0,96,255)" />
                    </clicked>
                    <image src="icon" />
                </element-config>
            </element>

            <text-element>
                <text-config>
                    <font-size is="8" />
                    <color is="white" />
                    <text-align-center />
                </text-config>
                <dyn-content from="label" />
            </text-element>
        </element>
    </reusable>

    <reusable name="drop down menu item">
        <element>
            <element-config>
                <padding-all is="5" />
                <width-grow />
                <hovered>
                    <color is="rgb(120,120,120)" />
                </hovered>
                <clicked emit="Clicked"></clicked>
                <child-gap is="5" />
                <align-children-y to="center" />
            </element-config>

            <element>
                <element-config>
                    <width-fixed at="18" />
                    <height-fixed at="18" />
                    <!-- <color is="yellow" /> -->
                    <image src="icon" />
                </element-config>
            </element>

            <text-element>
                <text-config>
                    <font-size is="12" />
                    <color is="white" />
                </text-config>
                <dyn-content from="label" />
            </text-element>
        </element>
    </reusable>

    <reusable name="textbox">
        <element>
            <element-config>
                <id from="ID" />
                <color is="white" />
                <radius-all is="5" />
                <border-all is="1" />
                <padding-all is="5" />
                <padding-top is="8" />
                <height-fit min="30" />
                <scroll horizontal="true" />
            </element-config>

            <text-element>
                <text-config>
                    <editable state="true" />
                    <font-size is="24" />
                    <color is="black" />
                </text-config>
                <dyn-content from="length" />
            </text-element>
        </element>
    </reusable>

    <!-- Docked Left Sidebar -->
    <element>
        <element-config>
            <width-fixed at="200" />
            <height-grow />
            <color is="rgb(120,120,120)" />
            <!-- <border-all is="1" /> -->
            <border-right is="1" />
        </element-config>

        <tk type="treeview"></tk>
    </element>

    <!-- 3D Viewer Window -->
    <element>
        <element-config>
            <width-grow />
            <height-grow />
            <padding-all is="10" />
            <!-- <color is="black" /> -->
        </element-config>

        
        <!-- Left side of screen -->
        <element>
            <element-config>
                <id is="left container" />
                <height-grow />
                <direction is="ttb" />
            </element-config>

            <element if-not="show details window">
                <element-config>
                    <padding-all is="2" />
                    <radius-all is="5" />
                    <border-all is="1" />
                    <clicked emit="OpenDetailsWindow"></clicked>
                </element-config>
                <text-element>
                    <text-config>
                        <color is="black" />
                        <font-size is="18" />
                    </text-config>
                    <content>...</content>
                </text-element>
            </element>

            <element if="show details window">
                <element-config>
                    <id is="details window" />
                    <width-fixed at="200" />
                    <height-fixed at="200" />
                    <color is="rgb(0,96,255)" />
                    <border-all is="2" />
                    <radius-all is="15" />
                    <padding-all is="20" />
                    <direction is="ttb" />
                </element-config>

                <element>
                    <element-config>
                        <width-grow />
                        <align-children-x to="right" />
                        <padding-bottom is="10" />
                    </element-config>

                    <element>
                        <element-config>
                            <padding-all is="2" />
                            <radius-all is="5" />
                            <border-all is="1" />
                            <clicked emit="OpenDetailsWindow"></clicked>
                        </element-config>
                        <text-element>
                            <text-config>
                                <color is="black" />
                                <font-size is="18" />
                            </text-config>
                            <content>X</content>
                        </text-element>
                    </element>
                </element>

                <use name="textbox">
                    <set-text local="ID" to="x_position" />
                </use>
            </element>

            <!-- Left Side bar. Project Browser -->
            <element>
                <element-config>
                    <width-grow />
                    <height-grow />
                    <padding-top is="80" />
                    <padding-bottom is="80" />
                </element-config>

                <element if="show sidebar left">
                    <element-config>
                        <width-percent at="0.8" />
                        <height-grow />
                        <color is="rgb(0,96,255)" />
                        <radius-all is="10" />
                        <radius-bottom-left is="0" />
                        <radius-top-left is="0" />
                    </element-config>
                    <text-element>
                        <text-config>
                            <font-size is="12" />
                            <color is="black" />
                        </text-config>
                        <content>HI</content>
                    </text-element>
                </element>

                <element>
                    <element-config>
                        <direction is="ttb" />
                        <height-grow />
                    </element-config>

                    <element>
                        <element-config>
                            <height-grow />
                            <width-grow />
                        </element-config>
                    </element>

                    <element>
                        <element-config>
                            <color is="grey" />
                            <hovered>
                                <color is="red" />
                            </hovered>
                            <clicked emit="ShowSideBarLeft"></clicked>
                            <padding-top is="7" />
                            <padding-bottom is="9" />
                            <padding-left is="1" />
                            <padding-right is="2" />
                        </element-config>
                        <text-element>
                            <text-config>
                                <font-size is="12" />
                                <color is="black" />
                            </text-config>
                            <content>||</content>
                        </text-element>
                    </element>

                    <element>
                        <element-config>
                            <height-grow />
                            <width-grow />
                        </element-config>
                    </element>
                </element>
                
            </element>

            <!-- Action buttons -->
            <element>
                <element-config>
                    <id is="action button container" />
                    <width-grow />
                    <child-gap is="5" />
                </element-config>

                
                <use name="clickable icon">
                    <get-image local="icon" from="connect plc" />
                    <set-text local="label" to="Connect" />
                </use>
                <use name="clickable icon">
                    <get-image local="icon" from="play emulation" />
                    <set-text local="label" to="Play" />
                </use>
                <use name="clickable icon">
                    <get-image local="icon" from="add load" />
                    <set-text local="label" to="Add Load" />
                </use>
                <use name="clickable icon">
                    <get-image local="icon" from="remove load" />
                    <set-text local="label" to="Delete Load" />
                </use>
                
            </element>

        </element>

        <!-- center screen -->
        <element>
            <element-config>
                <id is="center container" />
                <height-grow />
                <width-grow />
            </element-config>
        </element>

        <!-- right side of screen -->
        <element>
            <element-config>
                <id is="right container" />
                <height-grow />
                <direction is="ttb" />
                <align-children-x to="right" />
            </element-config>

            <element>
                <element-config>
                    <id is="utility area" />
                    <!-- <color is="yellow" /> -->
                    <direction is="ttb" />
                    <align-children-x to="right" />
                    <child-gap is="5" />
                </element-config>

                <element>
                    <element-config>
                        <id is="performance info" />
                        <padding-all is="3" />
                        <child-gap is="3" />
                        <align-children-x to="right" />
                        <align-children-y to="bottom" />
                        <radius-all is="4" />
                        <border-all is="1" />
                        <border-color is="rgb(0,96,255)" />
                        <border-between-children is="0" />
                        <direction is="ttb" />
                    </element-config>

                    <text-element>
                        <text-config>
                            <font-size is="12" />
                            <color is="rgb(0,96,255)" />
                        </text-config>
                        <content>Frames /s: 60</content>
                    </text-element>

                    <text-element>
                        <text-config>
                            <font-size is="12" />
                            <color is="rgb(0,96,255)" />
                        </text-config>
                        <content>Steps /s: 60</content>
                    </text-element>

                    <text-element>
                        <text-config>
                            <font-size is="12" />
                            <color is="rgb(0,96,255)" />
                        </text-config>
                        <content>Polls /s: 60</content>
                    </text-element>
                </element>

                <element>
                    <element-config>
                        <child-gap is="5" />
                    </element-config>

                    <!-- File dropdown menu -->
                    <element>
                        <element-config>
                            <!-- <color is="rgb(120,120,120)" /> -->
                            <clicked emit="FileMenuClicked"></clicked>
                        </element-config>

                        <use name="scaled clickable icon">
                            <get-image local="icon" from="open project" />
                            <set-text local="label" to="File" />
                        </use>

                        <element if="file menu opened">
                            <element-config>
                                <id is="FileMenuDropDownOuter" />
                                <padding-right is="8" />
                                <padding-bottom is="8" />
                                <floating />
                                <floating-offset x="-100" y="35" />
                                <floating-attach-element at="bottom-left" />
                                <floating-attach-to-parent at="bottom-left" />
                            </element-config>
                            <element>
                                <element-config>
                                    <id is="FilemenuDropDownInner" />
                                    <padding-all is="5" />
                                    <direction is="ttb" />
                                    <width-fixed at="150" />
                                    <color is="rgb(80,80,80)" />
                                    <radius-all is="8" />
                                </element-config>
                                <element if-not="project">
                                    <element-config>
                                        <id is="AllowedIfNoProjectOpened" />
                                        <direction is="ttb" />
                                    </element-config>
                                     <use name="drop down menu item">
                                        <set-text local="label" to="New Project" />
                                        <get-image local="icon" from="add machine" />
                                        <set-event local="Clicked" to="NewProject" />
                                    </use>
                                    <use name="drop down menu item">
                                        <set-text local="label" to="Open Project" />
                                        <get-image local="icon" from="open project" />
                                        <set-event local="Clicked" to="OpenProject" />
                                    </use>
                                </element>
                                <element if="project">
                                    <element-config>
                                        <id is="AllowedIfProjectOpened" />
                                        <direction is="ttb" />
                                    </element-config>
                                    <use name="drop down menu item">
                                        <set-text local="label" to="Save Project" />
                                        <get-image local="icon" from="save model" />
                                        <set-event local="Clicked" to="SaveProject" />
                                    </use>
                                    <use name="drop down menu item">
                                        <set-text local="label" to="Close Project" />
                                        <get-image local="icon" from="remove machine" />
                                        <set-event local="Clicked" to="CloseProject" />
                                    </use>
                                </element>
                            </element>
                        </element>
                    </element>

                    <!-- Edit dropdown menu -->
                    <element>
                        <element-config>
                            <clicked emit="EditMenuClicked"></clicked>
                        </element-config>

                        <use name="scaled clickable icon">
                            <get-image local="icon" from="settings" />
                            <set-text local="label" to="Edit" />
                        </use>

                        <element if="edit menu opened">
                            <element-config>
                                <padding-right is="8" />
                                <padding-bottom is="8" />
                                <floating />
                                <floating-offset x="-125" y="35" />
                                <floating-attach-element at="bottom-left" />
                                <floating-attach-to-parent at="bottom-left" />
                            </element-config>
                            <element>
                                <element-config>
                                    <padding-all is="5" />
                                    <direction is="ttb" />
                                    <width-fixed at="150" />
                                    <color is="rgb(80,80,80)" />
                                    <radius-all is="8" />
                                </element-config>
                                <element if="project">
                                    <element-config>
                                        <id is="EditAllowedIfProjectOpened" />
                                        <direction is="ttb" />
                                    </element-config>
                                    <use name="drop down menu item">
                                        <set-text local="label" to="Import Model" />
                                        <get-image local="icon" from="add machine" />
                                        <set-event local="Clicked" to="OpenFileDialog" />
                                    </use>
                                    <use name="drop down menu item">
                                        <set-text local="label" to="Lock Model" />
                                        <get-image local="icon" from="model unlocked" />
                                    </use>
                                </element>
                                <use name="drop down menu item">
                                    <set-text local="label" to="Reload App" />
                                    <get-image local="icon" from="reload app" />
                                </use>
                                <use name="drop down menu item">
                                    <set-text local="label" to="App Settings" />
                                    <get-image local="icon" from="settings" />
                                </use>
                            </element>
                        </element>
                    </element>

                    <!-- View dropdown menu -->
                    <!-- <element>
                        <element-config>
                            <clicked emit="ViewMenuClicked"></clicked>
                        </element-config>

                        <use name="scaled clickable icon">
                            <get-image local="icon" from="open project" />
                            <set-text local="label" to="View" />
                        </use>

                        <element if-not="file menu opened">
                            <element-config>
                                <padding-right is="8" />
                                <padding-bottom is="8" />
                                <floating />
                                <floating-offset x="-150" y="35" />
                                <floating-attach-element at="bottom-left" />
                                <floating-attach-to-parent at="bottom-left" />
                            </element-config>
                            <element>
                                <element-config>
                                    <padding-all is="5" />
                                    <direction is="ttb" />
                                    <width-fixed at="150" />
                                    <color is="rgb(80,80,80)" />
                                    <radius-all is="8" />
                                </element-config>
                                <use name="drop down menu item">
                                    <set-text local="label" to="Dock Project Browser" />
                                </use>
                                <use name="drop down menu item">
                                    <set-text local="label" to="Dock Machine Library" />
                                </use>
                                <use name="drop down menu item">
                                    <set-text local="label" to="Dark Theme" />
                                </use>
                            </element>
                        </element>
                    </element> -->
                </element>
            </element>

            <element>
                <element-config>
                    <width-grow />
                    <height-grow />
                    <padding-top is="80" />
                    <padding-bottom is="80" />
                    <align-children-x to="right" />
                </element-config>

                <element>
                    <element-config>
                        <direction is="ttb" />
                        <height-grow />
                    </element-config>

                    <element>
                        <element-config>
                            <height-grow />
                            <width-grow />
                        </element-config>
                    </element>

                    <element>
                        <element-config>
                            <color is="grey" />
                            <hovered>
                                <color is="red" />
                            </hovered>
                            <clicked emit="ShowSideBarRight"></clicked>
                            <padding-top is="7" />
                            <padding-bottom is="9" />
                            <padding-left is="1" />
                            <padding-right is="2" />
                        </element-config>
                        <text-element>
                            <text-config>
                                <font-size is="12" />
                                <color is="black" />
                            </text-config>
                            <content>||</content>
                        </text-element>
                    </element>

                    <element>
                        <element-config>
                            <height-grow />
                            <width-grow />
                        </element-config>
                    </element>
                </element>
                
                <element if="show sidebar right">
                    <element-config>
                        <width-fixed at="200" />
                        <height-grow />
                        <color is="rgb(0,96,255)" />
                        <!-- <radius-all is="10" /> -->
                        <radius-bottom-left is="10" />
                        <radius-top-left is="10" />
                    </element-config>
                    <text-element>
                        <text-config>
                            <font-size is="12" />
                            <color is="black" />
                        </text-config>
                        <content>HI</content>
                    </text-element>
                </element>

            </element>

            <element>
                <element-config>
                    <id is="modify button center" />
                    <direction is="ttb" />
                    <width-fit min="20" max="300" />
                    <child-gap is="10" />
                </element-config>

                <use name="clickable icon">
                    <get-image local="icon" from="add machine" />
                    <!-- <set-event local="Clicked" to="OpenFileDialog" /> -->
                </use>
                <use name="clickable icon">
                    <get-image local="icon" from="remove machine" />
                    <set-event local="Clicked" to="MoveModelX" />
                </use>
            </element>
        </element>

        
    </element>
</page>